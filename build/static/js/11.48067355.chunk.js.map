{"version":3,"sources":["img/profile.svg","modules/notificationBarControl.js","components/notification.js","components/InputField.js","screens/SignUp.js"],"names":["errorBarControl","setError","message","type","setTimeout","successBarControl","setSuccess","ErrorBar","messageType","className","SuccessBar","InputField","fieldName","fieldType","data","extraClass","useState","fieldEffect","setFieldEffect","onChange","onFocus","onBlur","connect","state","dispatch","username","email","password","confirmPassword","userData","setUserData","error","success","emailValid","setEmailValid","passwordvalid","setPasswordValid","imgPlaceHolder","imgSrc","setImgSrc","image","publicId","imgUploadRes","setImgUploadRes","history","useHistory","handleFile","e","a","URL","createObjectURL","target","files","FormData","append","axios","post","res","handleSubmit","preventDefault","validator","isEmail","profileImage","imageUrl","status","SAVE_USERDATA","payload","userId","follower","following","LOGIN","GET_ACCESS_TOKEN","accessToken","socket","auth","accountId","push","id","hidden","htmlFor","src","alt","height","width","DOMPurify","sanitize","value","onClick","to"],"mappings":"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","file":"static/js/11.48067355.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/profile.7f73584e.svg\";","export function errorBarControl(setError, message) {\r\n  setError({ type: \"errorBar-show\", message });\r\n  setTimeout(() => {\r\n    setError({ type: \"\", message });\r\n  }, 1500);\r\n}\r\n\r\nexport function successBarControl(setSuccess, message) {\r\n  setSuccess({ type: \"successBar-show\", message });\r\n  setTimeout(() => {\r\n    setSuccess({ type: \"\", message });\r\n  }, 1500);\r\n}\r\n","import React from \"react\";\r\n\r\nexport function ErrorBar({ message, messageType }) {\r\n  return (\r\n    <div className={`errorBar ${messageType}`}>\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function SuccessBar({ message, messageType }) {\r\n  return (\r\n    <div className={`successBar ${messageType}`}>\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nexport default function InputField({\r\n  fieldName,\r\n  fieldType,\r\n  data,\r\n  extraClass = \"\",\r\n}) {\r\n  const [fieldEffect, setFieldEffect] = useState(\"\");\r\n  const handleFocus = () => {\r\n    setFieldEffect(\"inputDataFocus\");\r\n  };\r\n  const handleBlurEffect = () => {\r\n    setFieldEffect(\"\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <label className=\"labelValue\">{fieldName}</label>\r\n      <input\r\n        className={`inputData ${fieldEffect} ${extraClass}`}\r\n        onChange={data}\r\n        type={fieldType}\r\n        onFocus={handleFocus}\r\n        onBlur={handleBlurEffect}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport validator from \"validator\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport {\r\n  errorBarControl,\r\n  successBarControl,\r\n} from \"../modules/notificationBarControl\";\r\nimport { GET_ACCESS_TOKEN, SAVE_USERDATA, LOGIN } from \"../state/stateConstant\";\r\nimport socket from \"../modules/handleSocket\";\r\n// components\r\nimport InputField from \"../components/InputField\";\r\nimport { ErrorBar, SuccessBar } from \"../components/notification\";\r\nimport DOMPurify from \"dompurify\";\r\n\r\n// placeholder image\r\nimport imgPlaceHolder from \"../img/profile.svg\";\r\n\r\nfunction SignUp({ dispatch }) {\r\n  /**\r\n   *  --- ------------local states--------------\r\n   */\r\n\r\n  const [userData, setUserData] = useState({\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n  });\r\n  const [error, setError] = useState({ type: \"\", message: \"\" });\r\n  const [success, setSuccess] = useState({ type: \"\", message: \"\" });\r\n  const [emailValid, setEmailValid] = useState(\"\");\r\n  const [passwordvalid, setPasswordValid] = useState(\"\");\r\n  const [imgSrc, setImgSrc] = useState(imgPlaceHolder);\r\n  const [imgUploadRes, setImgUploadRes] = useState({ image: \"\", publicId: \"\" });\r\n  const history = useHistory();\r\n\r\n  /** ************************************* /\r\n   *  ----- event handler ----------  /\r\n   *  **************************************/\r\n\r\n  const handleUsername = (e) => {\r\n    setUserData({ ...userData, username: DOMPurify.sanitize(e.target.value) });\r\n  };\r\n\r\n  const handleEmail = (e) => {\r\n    if (validator.isEmail(DOMPurify.sanitize(e.target.value))) {\r\n      setEmailValid(\"\");\r\n    } else {\r\n      setEmailValid(\"inputDataError\");\r\n    }\r\n    setUserData({ ...userData, email: DOMPurify.sanitize(e.target.value) });\r\n  };\r\n\r\n  const handlePassword = (e) => {\r\n    setUserData({ ...userData, password: DOMPurify.sanitize(e.target.value) });\r\n  };\r\n\r\n  const handleConfirmPassword = (e) => {\r\n    if (userData.password === DOMPurify.sanitize(e.target.value)) {\r\n      setPasswordValid(\"\");\r\n    } else {\r\n      setPasswordValid(\"inputDataError\");\r\n    }\r\n    setUserData({\r\n      ...userData,\r\n      confirmPassword: DOMPurify.sanitize(e.target.value),\r\n    });\r\n  };\r\n\r\n  const handleFile = async (e) => {\r\n    setImgSrc(URL.createObjectURL(e.target.files[0]));\r\n    const data = new FormData();\r\n    data.append(\"profile\", e.target.files[0]);\r\n    const res = await axios.post(\"/api/signUpProfileUpload\", data);\r\n    if (res.data === \"error\") {\r\n      errorBarControl(setError, res.data.message);\r\n    } else {\r\n      successBarControl(setSuccess, res.data.message);\r\n      setImgUploadRes({ image: res.data.image, publicId: res.data.publicId });\r\n    }\r\n  };\r\n\r\n  /** ************************************* /\r\n   *  ----- handle submit  ----------  /\r\n   *  **************************************/\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      userData.username === \"\" ||\r\n      userData.email === \"\" ||\r\n      userData.password === \"\" ||\r\n      userData.confirmPassword === \"\"\r\n    ) {\r\n      errorBarControl(setError, \"please provide all information\");\r\n      return;\r\n    }\r\n    if (!validator.isEmail(userData.email)) {\r\n      errorBarControl(setError, \"invalid email\");\r\n      return;\r\n    }\r\n    if (userData.password !== userData.confirmPassword) {\r\n      errorBarControl(setError, \"password doesn't match\");\r\n      return;\r\n    }\r\n\r\n    // fetch data from login api\r\n    let res = await axios.post(\"/api/signup\", {\r\n      username: userData.username,\r\n      email: userData.email,\r\n      password: userData.password,\r\n      profileImage: {\r\n        publicId: imgUploadRes.publicId || \"\",\r\n        imageUrl: imgUploadRes.image || \"\",\r\n      },\r\n    });\r\n    res = res.data;\r\n\r\n    /**\r\n     *  check if get error or not\r\n     */\r\n\r\n    if (res.status === \"error\") {\r\n      // if we get error then set the error message\r\n      errorBarControl(setError, res.message);\r\n      return;\r\n    } else {\r\n      // continue if we don't have an error\r\n      // dispatch event to save user data and accessToken\r\n      dispatch({\r\n        type: SAVE_USERDATA,\r\n        payload: {\r\n          userId: res.userId,\r\n          username: res.username,\r\n          email: res.email,\r\n          profileImage: res.profileImage,\r\n          follower: res.follower,\r\n          following: res.following,\r\n        },\r\n      });\r\n      dispatch({ type: LOGIN });\r\n      dispatch({ type: GET_ACCESS_TOKEN, payload: res.accessToken });\r\n      socket.auth = { accountId: res.userId };\r\n      socket.connect();\r\n      history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  /**\r\n   *  return component\r\n   */\r\n  return (\r\n    <div>\r\n      <form className=\"absolute-center\">\r\n        <div className=\"form-container\">\r\n          <h1 className=\"authHeading text-center\">Signup</h1>\r\n          <input onChange={handleFile} type=\"file\" id=\"profileImage\" hidden />\r\n          <label\r\n            className=\"horizontal-center mar-top-1 \"\r\n            htmlFor=\"profileImage\"\r\n          >\r\n            <img\r\n              src={imgSrc}\r\n              className=\"imageUploader\"\r\n              alt=\"profile\"\r\n              height=\"80\"\r\n              width=\"80\"\r\n            />\r\n          </label>\r\n          <InputField\r\n            data={handleUsername}\r\n            fieldType=\"text\"\r\n            fieldName=\"username\"\r\n          />\r\n          <InputField\r\n            data={handleEmail}\r\n            fieldType=\"email\"\r\n            fieldName=\"email\"\r\n            extraClass={emailValid}\r\n          />\r\n          <InputField\r\n            data={handlePassword}\r\n            fieldType=\"password\"\r\n            fieldName=\"password\"\r\n          />\r\n          <InputField\r\n            data={handleConfirmPassword}\r\n            fieldType=\"password\"\r\n            fieldName=\"confirm password\"\r\n            extraClass={passwordvalid}\r\n          />\r\n          <div className=\"horizontal-center mar-top-1\">\r\n            <button\r\n              onClick={handleSubmit}\r\n              className=\"btn-primary-2\"\r\n              type=\"submit\"\r\n            >\r\n              submit\r\n            </button>\r\n          </div>\r\n          <p className=\"text-center para-1-light\">\r\n            don't have an account ?{\" \"}\r\n            <Link className=\"linkLine-primary\" to=\"/login\">\r\n              Signup\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </form>\r\n      <ErrorBar message={error.message} messageType={error.type} />\r\n      <SuccessBar message={success.message} messageType={success.type} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {};\r\n}\r\n\r\nexport default connect(mapStateToProps)(SignUp);\r\n"],"sourceRoot":""}