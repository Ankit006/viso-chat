(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[15],{142:function(e,t,n){"use strict";var c=n(19),s=n.n(c),a=n(28),r=n(134),i=n(0),o=n(27),u=n(5),d=n(22),l=n.n(d),m=n.p+"static/media/dark-heart.f1f73767.svg",j=n.p+"static/media/heart.fb824694.svg",b=n.p+"static/media/comments.d2e37373.svg",p=n(2),h=n(3);t.a=Object(o.b)((function(e){return{accountId:e.userdata.userId,accessToken:e.token.accessToken}}))((function(e){var t=e.post,n=e.elementView,c=e.accountDetail,o=e.dispatch,d=e.accountId,f=e.accessToken,O=Object(u.g)(),g=Object(i.useState)(!1),v=Object(r.a)(g,2),x=v[0],k=v[1],w=function(){t.userId!==d?(o({type:p.v,payload:t.userId}),O.push("/viewaccount")):O.push("/account")},I=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,l.a.post("/api/addLike",{postId:t._id},{headers:{Authorization:"Bearer ".concat(f)}});case 3:"success"===e.sent.data.status&&console.log("success");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"card",ref:n,children:["all"===c?Object(h.jsxs)("div",{className:"user",children:[Object(h.jsx)("img",{src:t.profileImg,onClick:w,alt:"profilePic",height:"50",width:"50"}),Object(h.jsx)("p",{onClick:w,children:t.username})]}):null,Object(h.jsxs)("div",{className:"userPost",children:[Object(h.jsx)("img",{src:t.imageUrl,alt:"postPic",width:"500",height:"300"}),Object(h.jsx)("p",{children:t.description})]}),Object(h.jsxs)("div",{className:"commentSection",children:[Object(h.jsx)("span",{onClick:I,children:x?Object(h.jsx)("img",{src:j,alt:"noLike",height:"23",width:"23"}):Object(h.jsx)("img",{src:m,alt:"noLike",height:"23",width:"23"})}),Object(h.jsx)("img",{src:b,alt:"comments",height:"23",width:"23",onClick:function(){o({type:p.u,payload:t}),O.push("/showComments")}})]})]})}))},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(0);var c=n.p+"static/media/send.57a49ec4.svg",s=n(3);function a(e){var t=e.onChangeValue,n=e.value,a=e.sendMessage;return Object(s.jsx)("div",{className:"send",children:Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{type:"text",onChange:t,value:n}),Object(s.jsx)("img",{src:c,alt:"send",height:"25",width:"25",onClick:a})]})})}},253:function(e,t,n){"use strict";n.r(t);var c=n(19),s=n.n(c),a=n(17),r=n(28),i=n(134),o=n(0),u=n(5),d=n(142),l=n(3);function m(e){var t=e.comment,n=e.elementView;return Object(l.jsxs)("div",{className:"commentItem",ref:n,children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("img",{src:t.profileImage,alt:"profile",height:"30",width:"30"}),Object(l.jsx)("p",{children:t.username})]}),Object(l.jsx)("h3",{children:t.comment})]})}var j=n(27),b=n(22),p=n.n(b);var h=function(e,t,n){var c=Object(o.useState)(!1),u=Object(i.a)(c,2),d=u[0],l=u[1],m=Object(o.useState)(!1),j=Object(i.a)(m,2),b=j[0],h=j[1],f=Object(o.useRef)(!1),O=Object(o.useState)([]),g=Object(i.a)(O,2),v=g[0],x=g[1],k=function(){var e=Object(r.a)(s.a.mark((function e(t,n,c){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!1!==f.current&&n>=f.current)){e.next=2;break}return e.abrupt("return");case 2:return l(!0),h(!1),e.next=6,p.a.post("/api/getComments",{postId:t,start:n,end:c});case 6:"success"===(r=e.sent).data.status?(x((function(e){return[].concat(Object(a.a)(e),Object(a.a)(r.data.comments))})),f.current=r.data.numberOfComments,l(!1)):"error"===r.data.status&&(l(!1),h(!0));case 8:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var c=p.a.CancelToken.source();return k(e,t,n),function(){c.cancel()}}),[t,n]),{loading:d,comments:v,error:b,setComments:x}},f=n(151),O=n(141),g=n.n(O);t.default=Object(j.b)((function(e){return{post:e.posts.showPost,accountId:e.userdata.userId,username:e.userdata.username,profileImage:e.userdata.profileImage,accessToken:e.token.accessToken,login:e.loginState.login}}))((function(e){var t=e.post,n=e.accountId,c=e.profileImage,j=e.username,b=e.accessToken,O=e.login,v=Object(o.useState)({start:0,end:4}),x=Object(i.a)(v,2),k=x[0],w=x[1],I=Object(o.useState)(""),C=Object(i.a)(I,2),y=C[0],N=C[1],S=Object(o.useRef)(),T=Object(u.g)(),P=h(t._id,k.start,k.end),V=P.loading,z=P.comments,A=P.setComments,L=Object(o.useCallback)((function(e){V||(S.current&&S.current.disconnect(),S.current=new IntersectionObserver((function(e){e[0].isIntersecting&&w({start:k.start+4,end:k.end+4})})),e&&S.current.observe(e))}),[V]),_=function(){var e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O||T.push("/login"),A((function(e){return[].concat(Object(a.a)(e),[{comment:y,profileImage:c,userId:n,username:j}])})),e.next=4,p.a.post("/api/addComment",{postId:t._id,comment:y},{headers:{Authorization:"Bearer ".concat(b)}});case 4:"success"===e.sent.data.status&&console.log("success");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=0;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"commentPage",children:[Object(l.jsx)(d.a,{post:t,accountDetail:"all"}),Object(l.jsx)("div",{className:"commentArea",children:z.map((function(e,t){return B++,t+1===z.length?Object(l.jsx)(m,{comment:e,elementView:L},B):Object(l.jsx)(m,{comment:e},B)}))})]}),Object(l.jsx)(f.a,{value:y,sendMessage:_,onChangeValue:function(e){N(g.a.sanitize(e.target.value))}})]})}))}}]);
//# sourceMappingURL=15.48526457.chunk.js.map