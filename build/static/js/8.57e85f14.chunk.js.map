{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","img/profile.svg","img/home.svg","img/like.svg","img/search.svg","components/BottomNavBar.js","img/Ellipsis-1s-200px.svg","components/Person.js","requests/useFetchPersons.js","screens/Chat.js"],"names":["_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","connect","state","profileImage","userdata","notifications","saveNotifications","className","to","src","home","alt","height","width","search","style","textDecoration","like","profile","imgUrl","username","elementView","dispatch","userId","history","useHistory","gotoPrivate","type","SAVE_PERSONALCHAT_USER_DATA","payload","ref","onClick","useFetchPersons","skip","accessToken","useState","loading","setLoading","error","setError","numberOfPersons","useRef","persons","setPersons","loadingPerson","a","current","axios","get","headers","Authorization","res","data","status","prevState","numberOfFollowing","useEffect","source","CancelToken","cancel","token","setSkip","observer","elementObserver","useCallback","node","disconnect","IntersectionObserver","entries","isIntersecting","prev","observe","map","person","index","imageUrl","_id","loadingAnimation","BottomNavBar"],"mappings":"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","file":"static/js/8.57e85f14.chunk.js","sourcesContent":["import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default __webpack_public_path__ + \"static/media/profile.7f73584e.svg\";","export default __webpack_public_path__ + \"static/media/home.205e5c86.svg\";","export default __webpack_public_path__ + \"static/media/like.b16558c9.svg\";","export default __webpack_public_path__ + \"static/media/search.da3387c7.svg\";","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n// icons\r\nimport profile from \"../img/profile.svg\";\r\nimport home from \"../img/home.svg\";\r\nimport like from \"../img/like.svg\";\r\nimport search from \"../img/search.svg\";\r\n\r\nfunction BottomNavBar({ profileImage, notifications }) {\r\n  return (\r\n    <div className=\"bottomNav \">\r\n      <div>\r\n        <Link to=\"/\">\r\n          <img src={home} alt=\"home\" height=\"23\" width=\"23\" />\r\n        </Link>\r\n        <Link to=\"/search\">\r\n          <img src={search} alt=\"search\" height=\"23\" width=\"23\" />\r\n        </Link>\r\n        <Link style={{ textDecoration: \"none\" }} to=\"/notification\">\r\n          <div className=\"notificationButton\">\r\n            {notifications.length > 0 ? (\r\n              <div>\r\n                <p>{notifications.length}</p>\r\n              </div>\r\n            ) : null}\r\n            <img src={like} alt=\"like\" height=\"23\" width=\"23\" />\r\n          </div>\r\n        </Link>\r\n        {profileImage === \"\" ? (\r\n          <Link to=\"/account\">\r\n            <img src={profile} alt=\"profile\" height=\"23\" width=\"23\" />\r\n          </Link>\r\n        ) : (\r\n          <Link to=\"/account\">\r\n            <img\r\n              src={profileImage}\r\n              className=\"rounded\"\r\n              alt=\"profile\"\r\n              height=\"23\"\r\n              width=\"23\"\r\n            />\r\n          </Link>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    profileImage: state.userdata.profileImage,\r\n    notifications: state.saveNotifications.notifications,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(BottomNavBar);\r\n","export default __webpack_public_path__ + \"static/media/Ellipsis-1s-200px.aba39ddd.svg\";","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { SAVE_PERSONALCHAT_USER_DATA } from \"../state/stateConstant\";\n\nfunction Person({ imgUrl, username, elementView, dispatch, userId }) {\n  const history = useHistory();\n\n  const gotoPrivate = () => {\n    dispatch({\n      type: SAVE_PERSONALCHAT_USER_DATA,\n      payload: { userId, username, imgUrl },\n    });\n    history.push(\"/personalChat\");\n  };\n\n  return (\n    <div ref={elementView} className=\"person\">\n      <img\n        onClick={gotoPrivate}\n        src={imgUrl}\n        alt=\"person\"\n        height=\"50\"\n        width=\"50\"\n      />\n      <p onClick={gotoPrivate}>{username}</p>\n    </div>\n  );\n}\n\nexport default connect()(Person);\n","import { useEffect, useRef, useState } from \"react\";\nimport axios from \"axios\";\n\n/**\n *\n * @param {number} skip\n * @param {string} accessToken\n * @returns persons,error,loading\n */\n\nfunction useFetchPersons(skip, accessToken) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const numberOfPersons = useRef(false);\n  const [persons, setPersons] = useState([]);\n\n  const loadingPerson = async (skip) => {\n    if (numberOfPersons.current !== false && skip >= numberOfPersons.current) {\n      return;\n    }\n    setLoading(true);\n    setError(false);\n    const res = await axios.get(`/api/getAllFollowers?skip=${skip}&limit=8`, {\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n\n    if (res.data.status === \"success\") {\n      setPersons((prevState) => [...prevState, ...res.data.data]);\n      numberOfPersons.current = res.data.numberOfFollowing;\n      setLoading(false);\n    } else if (res.data.status === \"error\") {\n      setLoading(false);\n      setError(true);\n    }\n  };\n\n  useEffect(() => {\n    const source = axios.CancelToken.source();\n    loadingPerson(skip);\n    return () => {\n      source.cancel();\n    };\n  }, [skip]);\n\n  return { loading, persons, error };\n}\n\nexport default useFetchPersons;\n","import React, { useCallback, useRef, useState } from \"react\";\nimport BottomNavBar from \"../components/BottomNavBar\";\nimport { connect } from \"react-redux\";\nimport loadingAnimation from \"../img/Ellipsis-1s-200px.svg\";\nimport Person from \"../components/Person\";\nimport useFetchPersons from \"../requests/useFetchPersons\";\n\nfunction Chat({ accessToken }) {\n  const [skip, setSkip] = useState(0);\n  const observer = useRef();\n\n  const { persons, loading } = useFetchPersons(skip, accessToken);\n\n  const elementObserver = useCallback(\n    (node) => {\n      if (loading) return;\n      if (observer.current) observer.current.disconnect();\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting) {\n          setSkip((prev) => prev + 8);\n        }\n      });\n      if (node) observer.current.observe(node);\n    },\n    [loading]\n  );\n\n  return (\n    <>\n      <div className=\"chat \">\n        <h1>Chat</h1>\n        <div>\n          {persons.map((person, index) => {\n            if (index + 1 === persons.length) {\n              return (\n                <Person\n                  key={person._id}\n                  username={person.username}\n                  imgUrl={person.profileImage.imageUrl}\n                  elementView={elementObserver}\n                  userId={person._id}\n                />\n              );\n            } else {\n              return (\n                <Person\n                  key={person._id}\n                  username={person.username}\n                  imgUrl={person.profileImage.imageUrl}\n                  userId={person._id}\n                />\n              );\n            }\n          })}\n          <div className=\"horizontal-center mar-bottom-2\">\n            {loading ? (\n              <img\n                src={loadingAnimation}\n                alt=\"loading\"\n                height=\"50\"\n                width=\"100\"\n              />\n            ) : null}\n          </div>\n        </div>\n      </div>\n      <BottomNavBar />\n    </>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    accessToken: state.token.accessToken,\n  };\n}\n\nexport default connect(mapStateToProps)(Chat);\n"],"sourceRoot":""}